{% extends "layouts/base.html" %}
{% block content %}
  <div class="container mx-auto mt-10">
    <h1 class="text-2xl font-bold mb-5">Scan QR Code</h1>
    <div id="scan-form">
      <label for="scanner-name" class="block text-gray-700 text-sm font-bold mb-2">Scanner Name:</label>
      <input type="text"
             id="scanner-name"
             name="scanner-name"
             class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mb-3"
             placeholder="Enter scanner name">
      <button id="start-scan"
              class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
        Start Scan
      </button>
    </div>
    <div id="scan-result" class="mt-5"></div>
  </div>
  <script>
    document.getElementById('start-scan').addEventListener('click', function() {
      var scannerName = document.getElementById('scanner-name').value;
      var qrData = prompt('Enter QR Code Data:');
      if (qrData) {
        fetch('/scan/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
          },
          body: JSON.stringify({ qr_data: qrData, scanner_name: scannerName })
        })
        .then(response => response.text())
        .then(data => {
          document.getElementById('scan-result').innerText = data;
        });
      }
    });
  </script>
{% endblock content %}
